


icinga2::icinga_installation::service_restart:
                                        a:
                                          service: ido2db
                                        b:
                                          service: icinga2


icinga2::icinga_installation::ido_db_user: icinga
icinga2::icinga_installation::ido_db_pass: icinga
icinga2::icinga_installation::ido_db_name: icinga
icinga2::icinga_installation::ido_db_schema: /usr/share/icinga2-ido-mysql/schema/mysql.sql
icinga2::icinga_installation::ido_db_remote_host: localhost



icinga2::icinga_installation::yumrepo:
                    yum_icinga:
                                title: icinga-stable-release
                                baseurl: "http://copasp-po-b01p.sys.comcast.net:38253/resemail/x86_64/6/icinga2/"
                                enabled: 1
                                gpgcheck: 0
                                descr: "ICINGA (stable release for epel)"


icinga2::icinga_installation::rpm_pre:
                        a:
                                rpm: gcc
                        b:
                                rpm: glibc
                        c:
                                rpm: glibc-common
                        d:
                                rpm: gd
                        e:
                                rpm: gd-devel
                        f:
                                rpm: openssl-devel
                        g:
                                rpm: mysql-server
                        h:
                                rpm: libdbi
                        i:
                                rpm: libdbi-devel
                        j:
                                rpm: libdbi-drivers
                        k:
                                rpm: libpng
                        l:
                                rpm: libpng-devel
                        o:
                                rpm: php
                        p:
                                rpm: php-cli
                        q:
                                rpm: php-pear
                        r:
                                rpm: php-xmlrpc
                        s:
                                rpm: php-pdo
                        t:
                                rpm: php-soap
                        u:
                                rpm: php-gd
                        v:
                                rpm: php-ldap
                        w:
                                rpm: php-mysql
                        x:
                                rpm: icinga2
                        y:
                                rpm: icinga2-bin
                        z:
                                rpm: icinga2-common
                        a1:
                                rpm: icinga2-doc
                        b1:
                                rpm: icinga2-debuginfo
                        e1:
                                rpm: icinga2-ido-mysql
                        f1:
                                rpm: icinga-idoutils-libdbi-mysql
                        g1:
                                rpm: libdbi-dbd-mysql


icinga2::icinga_installation::dir:
                 pki:
                           dir: /etc/icinga2/pki
                 scripts:
                           dir: /etc/icinga2/scripts


icinga2::icinga_installation::file_templ:
                constant:
                         templ: /etc/icinga2/constants.conf
                         user: icinga
                         mode: "644"    
                         content: icinga2/constants_conf.erb
                idomysql:
                         templ: /etc/icinga2/features-enabled/ido-mysql.conf
                         user: icinga
                         mode: "644"     
                         content: icinga2/ido_mysql_conf.erb



icinga2::icinga_installation::files:
                 ca:
                        files: /etc/icinga2/pki/ca.crt
                        user: icinga
                        mode: "644"
                        source: /etc/icinga2/pki/ca.crt
                 csr:
                        files: /etc/icinga2/pki/%{::hostname}.csr
                        user: icinga
                        mode: "644"
                        source: /etc/icinga2/pki/%{::hostname}.csr
                 key:
                        files: /etc/icinga2/pki/%{::hostname}.key
                        user: icinga
                        mode: "600"
                        source: /etc/icinga2/pki/%{::hostname}.key
                 crt:
                        files: /etc/icinga2/pki/%{::hostname}.crt
                        user: icinga
                        mode: "644"
                        source: /etc/icinga2/pki/%{::hostname}.crt
                 icinga2_conf:
                        files: /etc/icinga2/icinga2.conf
                        user: icinga
                        mode: "640"
                        source: /etc/icinga2/icinga2.conf
                 api_conf:
                        files: /etc/icinga2/features-enabled/api.conf
                        user: icinga
                        mode: "644"
                        source: /etc/icinga2/features-enabled/api.conf
                 icinga-oiv-host:
                        files: /etc/icinga2/scripts/icinga-oiv-host.sh
                        user: icinga
                        mode: "755"
                        source: /etc/icinga2/scripts/icinga-oiv-host.sh
                 icinga-oiv:
                        files: /etc/icinga2/scripts/icinga-oiv.sh
                        user: icinga
                        mode: "755"
                        source: /etc/icinga2/scripts/icinga-oiv.sh




icinga2::icinga_installation::feature:
              a:
                feature: api
              b:
                feature:  command
              c:
                feature:  ido-mysql
              d:
                feature:  notification


icinga2::icinga_installation::ido_mysql_host: localhost
icinga2::icinga_installation::ido_enbale_ha: true






##############################################pnp_go_installation start######################


icinga2::pnp_go_inst::packages:
                 a:
                        rpm: wpmon
                 b:
                        rpm: spdb_gateway
                 c:
                        rpm: pnp_go


icinga2::pnp_go_inst::feature:
                 a:
                        feature:  perfdata

icinga2::pnp_go_inst::files:
                spdb_meta_data_conf:
                        files: /data/nagios/pnp/etc/spdb_meta_data.cfg
                        user: icinga
                        mode: "644"
                        source: "puppet:///modules/icinga2/data/nagios/pnp/etc/spdb_meta_data.cfg"
                pnp_go_conf:
                        files: /etc/sysconfig/pnp_go_conf
                        user: root
                        mode: "644"
                        source: "puppet:///modules/icinga2/etc/sysconfig/pnp_go_conf"
                spdb_gateway_wpmon_conf:
                        files: /usr/local/spdb_gateway/spdb_gateway.wpmon
                        user: nobody
                        mode: "755"
                        source: "puppet:///modules/icinga2/usr/local/spdb_gateway/spdb_gateway.wpmon"
                pnp_go_spdb_gateway_conf:
                        files: /etc/sysconfig/pnp_go_spdb_gateway
                        user: root
                        mode: "644"
                        source: "puppet:///modules/icinga2/etc/sysconfig/pnp_go_spdb_gateway"
                spdb_gateway_conf:
                        files: /etc/wpmon.d/spdb_gateway.cfg
                        user: root
                        mode: "644"
                        source: "puppet:///modules/icinga2/etc/wpmon.d/spdb_gateway.cfg"
                pnp_go_cfg:
                        files: /etc/spdb_gateway.d/pnp_go.cfg
                        user: root
                        mode: "644"
                        source: "puppet:///modules/icinga2/etc/spdb_gateway.d/pnp_go.cfg"
                perfdata_conf:
                        files: /etc/icinga2/features-enabled/perfdata.conf
                        user: icinga
                        mode: "640"
                        source: "puppet:///modules/icinga2/etc/icinga2/features-enabled/perfdata.conf"
                spdb_gateway:
                        files: /etc/init.d/spdb_gateway
                        user: root
                        mode: "755"
                        source: "/usr/local/spdb_gateway/spdb_gateway.service"

icinga2::pnp_go_inst::folder_perm:
                                a:
                                   folder: /data/nagios/pnp
                                b:
                                   folder: /var/log/spdb_gateway
                                c:
                                   folder: /var/opt/spdb_gateway

